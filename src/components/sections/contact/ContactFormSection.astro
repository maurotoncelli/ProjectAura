---
import { getContactContent } from '../../../lib/data';
const contact = getContactContent();
---

<div class="h-32 w-full bg-at-stone"></div>

<section class="w-full px-8 pt-16 pb-32 relative">
  <div class="container mx-auto">
    <div class="flex flex-col md:flex-row gap-16 md:gap-24">

      <!-- LEFT COLUMN: Heading + Contact Info -->
      <div class="w-full md:w-1/2 reveal-on-scroll">
        <p class="text-xs font-bold uppercase tracking-widest text-at-oak mb-8">{contact.form.label}</p>
        <h1 class="text-[clamp(3rem,8vw,6rem)] leading-[0.9] font-light text-at-graphite mb-4" set:html={contact.form.headingHtml}></h1>
        <p class="text-2xl font-serif italic text-at-text/40 mb-8">{contact.form.subheading}</p>
        <p class="text-sm text-at-text/50 mb-16 max-w-sm leading-relaxed">{contact.form.description}</p>

        <div class="space-y-2">
          <a href={`mailto:${contact.info.email.value}`} class="block text-sm uppercase tracking-widest font-bold hover:opacity-70 transition-opacity no-underline text-at-oak">{contact.info.email.value}</a>
          <p class="text-sm text-at-text/60">{contact.info.phone.value}</p>
        </div>
      </div>

      <!-- RIGHT COLUMN: Form -->
      <div class="w-full md:w-1/2 reveal-on-scroll">
        <form id="contact-form" class="space-y-0">
          <!-- Text fields (Nome, Email) -->
          {contact.form.fields.map(field => (
            <div class="input-group">
              <input type={field.type as any} class="minimal-input" placeholder={field.placeholder} required={field.required} />
              <span class="valid-check">&#10003;</span>
            </div>
          ))}

          <!-- Dropdown: Tipo di Richiesta -->
          <div class="input-group">
            <select class="minimal-input minimal-select" required>
              <option value="" disabled selected>{contact.form.requestTypeLabel}</option>
              {contact.form.requestTypes.map(type => (
                <option value={type}>{type}</option>
              ))}
            </select>
          </div>

          <!-- Textarea: Messaggio -->
          <div class="input-group">
            <textarea class="minimal-input resize-none h-32" placeholder={contact.form.messageField.placeholder} required={contact.form.messageField.required}></textarea>
          </div>

          <!-- Checkbox: Privacy -->
          <label class="cb-container mt-6">
            <input type="checkbox" id="contact-privacy-cb" class="cb-input" required />
            <span class="cb-checkmark"></span>
            <span class="cb-label">Ho letto e accetto la <button type="button" onclick="window.openPrivacy && window.openPrivacy()" class="cb-link bg-transparent border-none p-0 text-inherit cursor-none">Privacy Policy</button> e acconsento al trattamento dei dati.</span>
          </label>

          <!-- Checkbox: Marketing (opzionale) -->
          <label class="cb-container">
            <input type="checkbox" id="contact-marketing-cb" class="cb-input" />
            <span class="cb-checkmark"></span>
            <span class="cb-label">{contact.form.marketingCheckbox}</span>
          </label>

          <!-- Submit -->
          <button type="submit" class="w-full py-6 bg-at-graphite text-white font-bold tracking-[0.2em] text-sm uppercase hover:bg-at-graphite/90 transition-colors mt-10">{contact.form.submitLabel}</button>
        </form>
      </div>

    </div>
  </div>
</section>
