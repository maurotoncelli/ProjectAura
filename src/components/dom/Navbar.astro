---
/**
 * Navbar â€” Fixed navigation bar with brand, links, language selector, and cart button.
 * Persists across navigations. Uses mix-blend-mode: difference for text readability.
 */
import { getSiteData } from '../../lib/data';
import { getLangFromPath, localizeHref, type Lang } from '../../i18n/index';
import LanguageSelector from '../ui/LanguageSelector.tsx';

const site = getSiteData();
const currentLang = getLangFromPath(Astro.url.pathname);
const currentPath = Astro.url.pathname;
---

<nav class="fixed top-0 w-full flex justify-between items-center p-8 fixed-ui blend-nav text-white" transition:persist>
  <div class="text-xl font-semibold tracking-widest cursor-pointer hover:opacity-50 transition" data-nav-link="home">
    <a href={`/${currentLang}/`} class="no-underline text-inherit">{site.nav.brand}</a>
  </div>
  <div class="hidden md:flex space-x-12 text-sm uppercase tracking-widest">
    {site.nav.links.map(link => (
      <a href={localizeHref(link.href, currentLang)} data-astro-prefetch class="hover:opacity-50 transition uppercase no-underline text-inherit">{link.label}</a>
    ))}
  </div>
  
  <div id="nav-cart-container" class="flex items-center space-x-6 text-sm transition-opacity duration-300 absolute left-1/2 -translate-x-1/2 md:relative md:left-auto md:translate-x-0">
    <LanguageSelector client:load currentLang={currentLang} currentPath={currentPath} />
    <button id="cart-btn-label" class="hover:opacity-50">{site.nav.cartLabel} (0)</button>
  </div>
</nav>
