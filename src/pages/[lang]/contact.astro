---
import MainLayout from '../../layouts/MainLayout.astro';
import ContactFormSection from '../../components/sections/contact/ContactFormSection.astro';
import CitiesScroll from '../../components/sections/contact/CitiesScroll.astro';
import SimpleFooter from '../../components/sections/contact/SimpleFooter.astro';
import { SUPPORTED_LANGS, type Lang } from '../../i18n/index';

export function getStaticPaths() {
  return SUPPORTED_LANGS.map(lang => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang: Lang };
---

<MainLayout title="AETHER | Contatti" description="Contatta il team AETHER." page="contact" lang={lang}>
  <ContactFormSection />
  <CitiesScroll />
  <SimpleFooter />
</MainLayout>

<script>
  import { initContactPage } from '../../lib/contact-animations';
  import { initScrollAnimations } from '../../lib/scroll-animations';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  function bootContactPage() {
    initContactPage();
    initScrollAnimations();
    ScrollTrigger.refresh();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', bootContactPage);
  } else {
    bootContactPage();
  }
</script>
